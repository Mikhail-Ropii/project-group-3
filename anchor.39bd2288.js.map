{"version":3,"sources":["js/anchor.js"],"names":["isDomElement","obj","Element","isMouseEvent","MouseEvent","findScrollingElement","element","clientHeight","scrollHeight","clientWidth","scrollWidth","parentNode","d","document","scrollTopValue","domElement","scrollTop","offsetTopValue","offsetTop","requestAnimFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","scrollTo","to","duration","start","documentElement","body","change","currentTime","console","log","animateScroll","val","amount","Math","easeInOutQuad","init","anchor1Link","getElementById","anchor2Link","anchor3Link","anchor4Link","anchor1","anchor2","anchor3","anchor4","addEventListener","e","t","b","c","easeInCubic","inOutQuintic","ts","tc"],"mappings":";AAkKA,SAASA,EAAaC,GACXA,OAAAA,aAAeC,QAG1B,SAASC,EAAaF,GACXA,OAAAA,aAAeG,WAG1B,SAASC,EAAqBC,GAC1B,GACEA,GAAAA,EAAQC,aAAeD,EAAQE,cAAgBF,EAAQG,YAAcH,EAAQI,YACzEJ,OAAAA,QAEAA,EAAUA,EAAQK,aA/K5B,WACKC,IAAAA,EAAIC,SAmCCC,SAAAA,EAAeC,GAChB,OAAmBA,EAAWC,UAE7BC,SAAAA,EAAeF,GAChB,OAAmBA,EAAWG,UAmBlCC,IAAAA,EACIC,OAAOC,uBAAyBD,OAAOE,6BAA+BF,OAAOG,0BAA4B,SAASC,GACxHJ,OAAOK,WAAWD,EAAU,IAAO,KAI5BE,SAAAA,EAASC,EAAIH,EAAUI,EAAW,MAkBtC5B,EAAa2B,KAEhBA,EAAKA,EAAGT,WAkBLW,IAAAA,EAHIhB,SAASiB,gBAAgBZ,WAAaL,SAASkB,KAAKpB,WAAWO,WAAaL,SAASkB,KAAKb,UAIjGc,EAASL,EAAKE,EACdI,EAAc,EAEfC,QAAQC,IAAI,SAAUN,GACtBK,QAAQC,IAAI,MAAOR,GACnBO,QAAQC,IAAI,UAAWH,GAEnBI,IAAAA,EAAgB,WAEnBH,GAPY,GASRI,IAvBSC,EAuBTD,EAAME,KAAKC,cAAcP,EAAaJ,EAAOG,EAAQJ,GAvB5CU,EAyBRD,EAvBLxB,SAASiB,gBAAgBd,UAAYsB,EACrCzB,SAASkB,KAAKpB,WAAWK,UAAYsB,EACrCzB,SAASkB,KAAKf,UAAYsB,EAuBtBL,EAAcL,EACjBT,EAAiBiB,GAGbZ,GAAiC,mBAAdA,GAEtBA,KAKHY,KA/HQK,WAEJC,IAAAA,EAAe9B,EAAE+B,eAAe,cAChCC,EAAehC,EAAE+B,eAAe,YAChCE,EAAejC,EAAE+B,eAAe,YAChCG,EAAclC,EAAE+B,eAAe,gBAG/BI,EAAenC,EAAE+B,eAAe,SAChCK,EAAepC,EAAE+B,eAAe,OAChCM,EAAerC,EAAE+B,eAAe,OAChCO,EAAetC,EAAE+B,eAAe,WAEpCD,EAAYS,iBAAiB,QAAUC,IAAQ1B,EAASqB,EAASK,KAAM,GACvER,EAAYO,iBAAiB,QAAUC,IAAQ1B,EAASsB,EAASI,KAAM,GAIvEP,EAAYM,iBAAiB,QAAUC,IAAQ1B,EAASuB,EAASG,KAAM,GAEvEN,EAAYK,iBAAiB,QAAUC,IAAQ1B,EAASwB,EAAQhC,UAAWkC,KAAM,GAGjFlB,QAAQC,IAAIa,GACZd,QAAQC,IAAI,YAAYrB,EAAeiC,GAAS,MAAM9B,EAAe8B,IACrEb,QAAQC,IAAI,YAAYrB,EAAekC,GAAS,MAAM/B,EAAe+B,IACrEd,QAAQC,IAAI,YAAYrB,EAAemC,GAAS,MAAMhC,EAAegC,IACrEf,QAAQC,IAAI,YAAYrB,EAAeoC,GAAS,MAAMjC,EAAeiC,IAGrEhB,QAAQC,IAAI,yBAoGbM,GArID,GA8IAF,KAAKC,cAAgB,SAASa,EAAGC,EAAGC,EAAG3C,GAElCyC,OADJA,GAAKzC,EAAI,GACD,EACA2C,EAAI,EAAIF,EAAIA,EAAIC,GAGhBC,EAAI,KADZF,GACsBA,EAAI,GAAK,GAAKC,GAGrCf,KAAKiB,YAAc,SAASH,EAAGC,EAAGC,EAAG3C,GAE7B0C,OAAAA,EAAIC,IADDF,GAAKzC,GAAKyC,EAAIA,IAIzBd,KAAKkB,aAAe,SAASJ,EAAGC,EAAGC,EAAG3C,GACjC8C,IAAAA,GAAML,GAAKzC,GAAKyC,EACnBM,EAAKD,EAAKL,EACJC,OAAAA,EAAIC,GAAK,EAAII,EAAKD,GAAM,GAAKA,EAAKA,EAAK,GAAKC","file":"anchor.39bd2288.js","sourceRoot":"../src","sourcesContent":["(function() {\n\tlet d = document;\n\n\tfunction init() {\n\t\t//Links \n\t\tlet anchor1Link  = d.getElementById('about-link');\n\t\tlet anchor2Link  = d.getElementById('how-link');\n\t\tlet anchor3Link  = d.getElementById('our-link');\n\t\tlet anchor4Link = d.getElementById('contact-link');\n\t\n\t\t//Anchors\n\t\tlet anchor1      = d.getElementById('about');\n\t\tlet anchor2      = d.getElementById('how');\n\t\tlet anchor3      = d.getElementById('our');\n\t\tlet anchor4      = d.getElementById('contact');\n\t\t\n\t\tanchor1Link.addEventListener('click', (e) => { scrollTo(anchor1, e) }, false);\n\t\tanchor2Link.addEventListener('click', (e) => { scrollTo(anchor2, e) }, false);\n\t\t\n\t\t// anchor2Link.onclick = function() { scrollToSimple(document.documentElement, 500, 3000); }\n\t\t// anchor2Link2.onclick = function() { scrollToSimple(document.documentElement, 0, 3000); }\n\t\tanchor3Link.addEventListener('click', (e) => { scrollTo(anchor3, e) }, false);\n\t\t\n\t\tanchor4Link.addEventListener('click', (e) => { scrollTo(anchor4.offsetTop, e) }, false);\n\t\t\n\t\t\n\t\tconsole.log(anchor2); //DEBUG\n\t\tconsole.log('anchor1: '+scrollTopValue(anchor1)+' / '+offsetTopValue(anchor1)); //DEBUG\n\t\tconsole.log('anchor2: '+scrollTopValue(anchor2)+' / '+offsetTopValue(anchor2)); //DEBUG\n\t\tconsole.log('anchor3: '+scrollTopValue(anchor3)+' / '+offsetTopValue(anchor3)); //DEBUG\n\t\tconsole.log('anchor4: '+scrollTopValue(anchor4)+' / '+offsetTopValue(anchor4)); //DEBUG\n\t\t// d.addEventListener('scroll', (e) => { console.log(e) }, false); //DEBUG\n\t\t\n\t\tconsole.log('App loaded. Have fun!');\n\t}\n\t\n\tfunction scrollTopValue(domElement) { //DEBUG\n\t\treturn 'scrollTopValue:', domElement.scrollTop;\n\t}\n\tfunction offsetTopValue(domElement) { //DEBUG\n\t\treturn 'offsetTopValue:', domElement.offsetTop;\n\t}\n\n\t/*function scrollToSimple(element, to, duration) { //FIXME finish this\n\t\tif (duration < 0) return;\n\t\tvar difference = to - element.offsetTop;\n\t\tvar perTick = difference / duration * 10;\n\t\tconsole.log('perTick', perTick); //DEBUG\n\n\t\tsetTimeout(function() {\n\t\t\tconsole.log('element.scrollTop:', element.scrollTop); //DEBUG\n\t\t\telement.scrollTop += perTick;\n\t\t\tconsole.log('element.scrollTop:', element.scrollTop); //DEBUG\n\t\t\tscrollTo(element, to, duration - 10);\n\t\t}, 10);\n\t}*/\n\n\t//cf. https://gist.github.com/james2doyle/5694700\n\t// requestAnimationFrame for Smart Animating https://goo.gl/sx5sts\n\tvar requestAnimFrame = (function() {\n\t\treturn window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) {\n\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t};\n\t})();\n\n\tfunction scrollTo(to, callback, duration = 1500) { //FIXME this always starts from '0', instead of the clicked element offsetTop -> This is because the position is calculated for the main <html> element, not the <iframe>'s <html> tag\n\t\t/*console.log('from:', from); //DEBUG\n\t\t// console.log('from.clientY:', from.clientY); //DEBUG\n\t\t// console.log('from.target.offsetTop:', from.target.offsetTop); //DEBUG\n\t\t\n\t\t// console.log('position():', document.documentElement.offsetTop || document.body.parentNode.offsetTop || document.body.offsetTop); //DEBUG\n\t\t// console.log('document.documentElement:', document.documentElement); //DEBUG\n\t\t// console.log('document.body:', document.body); //DEBUG\n\t\tlet start;\n\t\t\n\t\tif (isMouseEvent(from)) { //FIXME : the scroll starts at the link, not where the screen really is : fix that\n\t\t\t// start = from.target.offsetTop;\n\t\t\tstart = from.pageY; //FIXME\n\t\t}\n\t\telse {\n\t\t\tstart = from;\n\t\t}*/\n\t\t\n\t\tif (isDomElement(to)) {\n\t\t\t// console.log('this is an element:', to); //DEBUG\n\t\t\tto = to.offsetTop;\n\t\t}\n\t\t/*else {\n\t\t\t// console.log('this is NOT an element:', to); //DEBUG\n\t\t}*/\n\t\t\n\t\t// because it's so fucking difficult to detect the scrolling element, just move them all\n\t\tfunction move(amount) {\n\t\t\t// document.scrollingElement.scrollTop = amount; //FIXME Test that\n\t\t\tdocument.documentElement.scrollTop = amount;\n\t\t\tdocument.body.parentNode.scrollTop = amount;\n\t\t\tdocument.body.scrollTop = amount;\n\t\t}\n\n\t\tfunction position() {\n\t\t\treturn document.documentElement.offsetTop || document.body.parentNode.offsetTop || document.body.offsetTop;\n\t\t}\n\t\t\n\t\tvar start = position(),\n\t\t\tchange = to - start,\n\t\t\tcurrentTime = 0,\n\t\t\tincrement = 20;\n\t\tconsole.log('start:', start); //DEBUG\n\t\tconsole.log('to:', to); //DEBUG\n\t\tconsole.log('change:', change); //DEBUG\n\t\t\n\t\tvar animateScroll = function() {\n\t\t\t// increment the time\n\t\t\tcurrentTime += increment;\n\t\t\t// find the value with the quadratic in-out easing function\n\t\t\tvar val = Math.easeInOutQuad(currentTime, start, change, duration);\n\t\t\t// move the document.body\n\t\t\tmove(val);\n\t\t\t// do the animation unless its over\n\t\t\tif (currentTime < duration) {\n\t\t\t\trequestAnimFrame(animateScroll);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (callback && typeof(callback) === 'function') {\n\t\t\t\t\t// the animation is done so lets callback\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tanimateScroll();\n\t}\n\n\tinit();\n})();\n\n//-------------------- Unimportant js functions --------------------\n// easing functions https://goo.gl/5HLl8\n//t = current time\n//b = start value\n//c = change in value\n//d = duration\nMath.easeInOutQuad = function(t, b, c, d) {\n\tt /= d / 2;\n\tif (t < 1) {\n\t\treturn c / 2 * t * t + b\n\t}\n\tt--;\n\treturn -c / 2 * (t * (t - 2) - 1) + b;\n};\n\nMath.easeInCubic = function(t, b, c, d) {\n\tvar tc = (t /= d) * t * t;\n\treturn b + c * (tc);\n};\n\nMath.inOutQuintic = function(t, b, c, d) {\n\tvar ts = (t /= d) * t,\n\t\ttc = ts * t;\n\treturn b + c * (6 * tc * ts + -15 * ts * ts + 10 * tc);\n};\n\nfunction isDomElement(obj) {\n    return obj instanceof Element;\n}\n\nfunction isMouseEvent(obj) {\n    return obj instanceof MouseEvent;\n}\n\nfunction findScrollingElement(element) { //FIXME Test this too\n\tdo {\n\t\tif (element.clientHeight < element.scrollHeight || element.clientWidth < element.scrollWidth) {\n\t\t\treturn element;\n\t\t}\n\t} while (element = element.parentNode);\n}"]}